# 1.Golang基础概念 

## 1. 变量

### 1-1. 内建变量类型


#### 1-1-1. 整数类型(零值-0)

> Go语言同时提供了有符号和无符号的整数类型，其中包括 int8、int16、int32 和 int64 四种大小截然不同的有符号整数类型，分别对应 8、16、32、64 bit（二进制位）大小的有符号整数，与此对应的是 uint8、uint16、uint32 和 uint64 四种无符号整数类型。
>
> 此外还有两种整数类型 int 和 uint，它们分别对应特定 CPU 平台的字长（机器字大小），其中 int 表示有符号整数，应用最为广泛，uint 表示无符号整数。实际开发中由于编译器和计算机硬件的不同，int 和 uint 所能表示的整数大小会在 32bit 或 64bit 之间变化。在二进制传输、读写文件的结构描述时，为了保持文件的结构不会受到不同编译目标平台字节长度的影响，不要使用 int 和 uint.
>
> 大多数情况下，我们只需要 int 一种整型即可，它可以用于循环计数器（for 循环中控制循环次数的变量）、数组和切片的索引，以及任何通用目的的整型运算符，通常 int 类型的处理速度也是最快的。
>
> 用来表示 Unicode 字符的 rune 类型和 int32 类型是等价的，通常用于表示一个 Unicode 码点。这两个名称可以互换使用。同样，byte 和 uint8 也是等价类型，byte 类型一般用于强调数值是一个原始的数据而不是一个小的整数。
>
> 最后，还有一种无符号的整数类型 uintptr，它没有指定具体的 bit 大小但是足以容纳指针。uintptr 类型只有在底层编程时才需要，特别是Go语言和C语言函数库或操作系统接口相交互的地方。
>
> 尽管在某些特定的运行环境下 int、uint 和 uintptr 的大小可能相等，但是它们依然是不同的类型，比如 int 和 int32，虽然 int 类型的大小也可能是 32 bit，但是在需要把 int 类型当做 int32 类型使用的时候必须显示的对类型进行转换，反之亦然。
>
> Go语言中有符号整数采用 2 的补码形式表示，也就是最高 bit 位用来表示符号位，一个 n-bit 的有符号数的取值范围是从 -2(n-1) 到 2(n-1)-1。无符号整数的所有 bit 位都用于表示非负数，取值范围是 0 到 2n-1。例如，int8 类型整数的取值范围是从 -128 到 127，而 uint8 类型整数的取值范围是从 0 到 255。

#### 1-1-2. 浮点类型(零值-0.0)

> 这些浮点数类型的取值范围可以从很微小到很巨大。浮点数取值范围的极限值可以在 math 包中找到：
>
> - 常量 math.MaxFloat32 表示 float32 能取到的最大数值，大约是 3.4e38；
> - 常量 math.MaxFloat64 表示 float64 能取到的最大数值，大约是 1.8e308；
> - float32 和 float64 能表示的最小值分别为 1.4e-45 和 4.9e-324。
>
>
> 一个 float32 类型的浮点数可以提供大约 6 个十进制数的精度，而 float64 则可以提供约 15 个十进制数的精度，通常应该优先使用 float64 类型，因为 float32 类型的累计计算误差很容易扩散，并且 float32 能精确表示的正整数并不是很大。

#### 1-2-3. 复数

> 在计算机中，复数是由两个浮点数表示的，其中一个表示实部（real），一个表示虚部（imag）。
>
> Go语言中复数的类型有两种，分别是 complex128（64 位实数和虚数）和 complex64（32 位实数和虚数），其中 complex128 为复数的默认类型。
>
> 复数的值由三部分组成 RE + IMi，其中 RE 是实数部分，IM 是虚数部分，RE 和 IM 均为 float 类型，而最后的 i 是虚数单位。
>
> 复数也可以用`==`和`!=`进行相等比较，只有两个复数的实部和虚部都相等的时候它们才是相等的。
>
> Go语言内置的 math/cmplx 包中提供了很多操作复数的公共方法，实际操作中建议大家使用复数默认的 complex128 类型，因为这些内置的包中都使用 complex128 类型作为参数。

```golang
func euler() {
    fmt.Println(cmplx.Exp(1i * math.Pi) + 1)
}
```

####  1-2-4. boll(零值-false)

> 一个布尔类型的值只有两种：true 或 false。if 和 for 语句的条件部分都是布尔类型的值，并且`==`和`<`等比较操作也会产生布尔型的值。
>
> Go语言对于值之间的比较有非常严格的限制，只有两个相同类型的值才可以进行比较，如果值的类型是接口（interface），那么它们也必须都实现了相同的接口。如果其中一个值是常量，那么另外一个值可以不是常量，但是类型必须和该常量类型相同。如果以上条件都不满足，则必须将其中一个值的类型转换为和另外一个值的类型相同之后才可以进行比较。
>
> 布尔值可以和 &&（AND）和 ||（OR）操作符结合，并且有短路行为，如果运算符左边的值已经可以确定整个布尔表达式的值，那么运算符右边的值将不再被求值
>
> 布尔型无法参与数值运算，也无法与其他类型进行转换。

#### 1-1-5. string类型(零值-空字符串)

> 一个字符串是一个不可改变的字节序列，字符串可以包含任意的数据，但是通常是用来包含可读的文本，字符串是 UTF-8 字符的一个序列（当字符为 ASCII 码表上的字符时则占用 1 个字节，其它字符根据需要占用 2-4 个字节）。
>
> UTF-8 是一种被广泛使用的编码格式，是文本文件的标准编码，其中包括 XML 和 JSON 在内也都使用该编码。由于该编码对占用字节长度的不定性，在Go语言中字符串也可能根据需要占用 1 至 4 个字节，这与其它编程语言如 [C++](http://c.biancheng.net/cplus/)、[Java](http://c.biancheng.net/java/) 或者 [Python](http://c.biancheng.net/python/) 不同（Java 始终使用 2 个字节）。Go语言这样做不仅减少了内存和硬盘空间占用，同时也不用像其它语言那样需要对使用 UTF-8 字符集的文本进行编码和解码。
>
> 字符串是一种值类型，且值不可变，即创建某个文本后将无法再次修改这个文本的内容，更深入地讲，字符串是字节的定长数组。
>
> 使用 反引号定义多行字符串, 在反引号 间的所有代码均不会被编译器识别，而只是作为字符串的一部分

#### 1-1-6. 字符类型

> 字符串中的每一个元素叫做“字符”，在遍历或者单个获取字符串元素时可以获得字符。
>
> Go语言的字符有以下两种：
>
> - 一种是 uint8 类型，或者叫 byte 型，代表了 ASCII 码的一个字符。
> - 另一种是 rune 类型，代表一个 UTF-8 字符，当需要处理中文、日文或者其他复合字符时，则需要用到 rune 类型。rune 类型等价于 int32 类型。

#### 1-1-7. 指针类型(零值-nil, 包括切片、函数零值都是nil)

> 指针（pointer）在Go语言中可以被拆分为两个核心概念：
>
> - 类型指针，允许对这个指针类型的数据进行修改，传递数据可以直接使用指针，而无须拷贝数据，类型指针不能进行偏移和运算。
> - 切片，由指向起始元素的原始指针、元素数量和容量组成。
>
> 操作在右值时，就是取指向变量的值，当操作在左值时，就是将值设置给指向的变量。
>
> new() 函数创建指针

```golang
str := new(string)
*str = "中国人"
fmt.Println(*str)
```
## 1-2. 变量声明
#### 1-2-1. 匿名变量

> 匿名变量的特点是一个下画线“_”
>
> <font color=red>匿名变量不占用内存空间，不会分配内存。匿名变量与匿名变量之间也不会因为多次声明而无法使用</font>

```golang
func GetData() (int, int) {
    return 100, 200
}
func main(){
    a, _ := GetData()
    _, b := GetData()
    fmt.Println(a, b)
}
```

#### 1-2-2. 常量声明

> Go语言中的常量使用关键字 const 定义，用于存储不会改变的数据，常量是在编译时被创建的，即使定义在函数内部也是如此，并且只能是布尔型、数字型（整数型、浮点型和复数）和字符串型。由于编译时的限制，定义常量的表达式必须为能被编译器求值的常量表达式。
>
> 在Go语言中，你可以省略类型说明符 [type]，因为编译器可以根据变量的值来推断其类型。
>
> - 显式类型定义： const b string = "abc"
> - 隐式类型定义： const b = "abc"

```golang

const pi float = 3.14159
const pi = 3.14159
const (
    e  = 2.7182818
    pi = 3.1415926
    a = 1
    b
    c = 2
    d = "abc"
)

// 类型不确定
cost q, r = 3, 4
var c int
c= int(math.Sqrt(a*a + b*b)) // 不会报错

// 枚举
// iota
type Weekday int
const (
    Sunday Weekday = iota
    Monday
    Tuesday
    Wednesday
    Thursday
    Friday
    Saturday
)

const (
    b = 1 << (10 * iota)
    kb
    mb
    gb
    tb
    pb
)

# 常量的值必须是能够在编译时就能够确定的，可以在其赋值表达式中涉及计算过程，但是所有用于计算的值必须在编译期间就能获得
# 正确
const c1 = 2/3
# 错误
const c2 = getNumber()
```

#### 1-2-3. 常规变量声明

- var 关键之声明

> var 变量名 类型 = 表达式

```golang
var a
var s int = 100
var a = "abc"
var a, n int = 100, 200
var a, b = 100, "abc"
var (
	a = 100
    b = "abc"
)
```

- ## 短变量声明(:=)

> 这种声明写法的左值变量至少有一个变量必须是没有定义过的变量, 否则报错: no new variables on left side of :=
>
> := 必须用在函数体内部, 否则报错: non-declaration statement outside function body

```gollang
func main() {
    a := 100

    var b = 1000
    var c = 200
    d, c := 100, 200
}

```

## 2. 类型(type)

### 2-1.  别名与类型定义

````golang

package main
import (
    "fmt"
)
// 将NewInt定义为int类型
type NewInt int
// 将int取一个别名叫IntAlias
type IntAlias = int

func main() {
    // 将a声明为NewInt类型
    var a NewInt
    // 查看a的类型名
    fmt.Printf("a type: %T\n", a)
    // 将a2声明为IntAlias类型
    var a2 IntAlias
    // 查看a2的类型名
    fmt.Printf("a2 type: %T\n", a2)
}
````

> 输出

```tex
a type: main.NewInt
a2 type: int
```

> 非本地类型不能定义方法, 报错: cannot define new methods on non-local type time.Duration

```golang
package main

import (
    "time"
)

// 定义time.Duration的别名为MyDuration
type MyDuration = time.Duration

// 为MyDuration添加一个函数
func (m MyDuration) EasySet(a string) {

}

func main() {

}
```

> 不能在一个非本地的类型 time.Duration 上定义新方法，非本地类型指的就是 time.Duration 不是在 main 包中定义的，而是在 time 包中定义的，与 main 包不在同一个包中，因此不能为不在一个包中的类型定义方法。

## 3. 关键字和标识符

> Go语言中的关键字一共有 25 个, 关键字不能够作标识符使用
>
> 预定义标识符一共有 36 个，主要包含Go语言中的基础数据类型和内置函数，这些预定义标识符也不可以当做标识符来使用

| break    | default     | func   | interface | select |
| -------- | ----------- | ------ | --------- | ------ |
| case     | defer       | go     | map       | struct |
| chan     | else        | goto   | package   | switch |
| const    | fallthrough | if     | range     | type   |
| continue | for         | import | return    | var    |



| append | bool    | byte    | cap     | close  | complex | complex64 | complex128 | uint16  |
| ------ | ------- | ------- | ------- | ------ | ------- | --------- | ---------- | ------- |
| copy   | false   | float32 | float64 | imag   | int     | int8      | int16      | uint32  |
| int32  | int64   | iota    | len     | make   | new     | nil       | panic      | uint64  |
| print  | println | real    | recover | string | true    | uint      | uint8      | uintptr |

## 4. 优先级

| 优先级 | 分类           | 运算符                                         | 结合性                          |
| ------ | -------------- | ---------------------------------------------- | ------------------------------- |
| 1      | 逗号运算符     | ,                                              | 从左到右                        |
| 2      | 赋值运算符     | =、+=、-=、*=、/=、 %=、 >=、 <<=、&=、^=、\|= | <font color=red>从右到左</font> |
| 3      | 逻辑或         | \|\|                                           | 从左到右                        |
| 4      | 逻辑与         | &&                                             | 从左到右                        |
| 5      | 按位或         | \|                                             | 从左到右                        |
| 6      | 按位异或       | ^                                              | 从左到右                        |
| 7      | 按位与         | &                                              | 从左到右                        |
| 8      | 相等/不等      | ==、!=                                         | 从左到右                        |
| 9      | 关系运算符     | <、<=、>、>=                                   | 从左到右                        |
| 10     | 位移运算符     | <<、>>                                         | 从左到右                        |
| 11     | 加法/减法      | +、-                                           | 从左到右                        |
| 12     | 乘法/除法/取余 | *（乘号）、/、%                                | 从左到右                        |
| 13     | 单目运算符     | !、*（指针）、& 、++、--、+（正号）、-（负号） | <font color=red>从右到左</font> |
| 14     | 后缀运算符     | ( )、[ ]、->                                   | 从左到右                        |

## 5. 占位符

### 5-1. 普通占位符

|占位符 | 说明 | 举例 | 输出|
| ---- | ---- | ---- | ---- |
|%v | 相应值的默认格式。 | Printf("%v", people) | {zhangsan}|
|%+v | 打印结构体时，会添加字段名 | Printf("%v", people) | {Name:zhangsan}|
|%#v | 相应值的Go语法表示 | Printf("#v", people) | main.Human{Name:“zhangsan”}|
|%T | 相应值的类型的Go语法表示 | Printf("%T", people) | main.Human|
|%% | 字符串中的%                | Printf("%%") | %|

### 5-2. bool占位符

| 占位符 | 说明          | 举例               | 输出 |
| ------ | ------------- | ------------------ | ---- |
| %t     | true 或 false | Printf("%t", true) | true |

### 5-3. 整数占位符

| 占位符 | 说明                                       | 举例                 | 输出   |
| ------ | ------------------------------------------ | -------------------- | ------ |
| %b     | 二进制表示                                 | Printf("%b", 5)      | 101    |
| %c     | 相应Unicode码点所表示的字符                | Printf("%c", 0x4E2D) | 中     |
| %d     | 十进制表示                                 | Printf("%d", 0x12)   | 18     |
| %o     | 八进制表示                                 | Printf("%d", 10)     | 12     |
| %q     | 单引号围绕的字符字面值，由Go语法安全地转义 | Printf("%q", 0x4E2D) | ‘中’   |
| %x     | 十六进制表示，字母形式为小写 a-f           | Printf("%x", 13)     | d      |
| %X     | 十六进制表示，字母形式为大写 A-F           | Printf("%x", 13)     | D      |
| %U     | Unicode格式：U+1234，等同于 “U+%04X”       | Printf("%U", 0x4E2D) | U+4E2D |

### 5-4. 浮点和复数

| 占位符 | 说明                                                         | 举例                   | 输出         |
| ------ | ------------------------------------------------------------ | ---------------------- | ------------ |
| %t     | true 或 false                                                | Printf("%t", true)     | true         |
| %b     | 无小数部分的，指数为二的幂的科学计数法， 与 strconv.FormatFloat 的 ‘b’ 转换格式一致。例如 -123456p-78 |                        |              |
| %e     | 科学计数法，例如 -1234.456e+78                               | Printf("%e", 10.2)     | 1.020000e+01 |
| %E     | 科学计数法，例如 -1234.456E+78                               | Printf("%e", 10.2)     | 1.020000E+01 |
| %f     | 有小数点而无指数，例如 123.456                               | Printf("%f", 10.2)     | 10.200000    |
| %g     | 根据情况选择 %e 或 %f 以产生更紧凑的（无末尾的0）输出        | Printf("%g", 10.20)    | 10.2         |
| %G     | 根据情况选择 %E 或 %f 以产生更紧凑的（无末尾的0）输出        | Printf("%G", 10.20+2i) | (10.2+2i)    |

### 5-5. 字符串与字节切片

| 占位符 | 说明                                   | 举例                           | 输出         |
| ------ | -------------------------------------- | ------------------------------ | ------------ |
| %s     | 输出字符串表示（string类型或[]byte)    | Printf("%s", []byte(“Go语言”)) | Go语言       |
| %q     | 双引号围绕的字符串，由Go语法安全地转义 | Printf("%q", “Go语言”)         | “Go语言”     |
| %x     | 十六进制，小写字母，每字节两个字符     | Printf("%x", “golang”)         | 676f6c616e67 |
| %X     | 十六进制，大写字母，每字节两个字符     | Printf("%X", “golang”)         | 676F6C616E67 |

### 5-6. 指针

| 占位符 | 说明                  | 举例                  | 输出     |
| ------ | --------------------- | --------------------- | -------- |
| %p     | 十六进制表示，前缀 0x | Printf("%p", &people) | 0x4f57f0 |